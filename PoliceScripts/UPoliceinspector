// This is the Configuration file for the UPoliceinspector Script

FinePayout = True
GroupName = True
ObjectID = True


// This is the onload showing the script has been ran and is loaded

event onLoad(){
    server.log("------------------------------------------");
    server.log("-----[UPoliceinspector Script]------------");
    server.log("-------[Successfully Loaded]--------------");
    server.log("------[Made By: Midnight_Real]------------");
    server.log("----[Uscript By: Pluto Uscripts]----------");
    server.log("------------------------------------------");
}


// DO NOT TOUCH BELOW THIS LINE - IF YOU DON'T KNOW WHAT YOU ARE DOING
// THIS CAN BREAK THE SCRIPT AND IT WILL NOT WORK

command door(){
    permission = "UPI.door";
    execute(){       
        barricade = player.look.getBarricade();
        if(barricade != null) {
        if(barricade.door) {
            player.message("Target Door Found | Opening/Closing");
            barricade.door.toggle();
            return;
            }
        }
    }
}

command salvage(){
    permission = "UPI.salvage";
    execute(){       
        barricade = player.look.getBarricade();
        if(barricade != null) {
            barricade.destroy();
            player.message("Target Barricade Found | Picking Up");
            BID = barricade.id;
            player.inventory.addItem(BID);
            return;
        }
        else {
            player.message("No Target Found");
            return;
        }
    }
}

command cuff(targetPlayerName){
    permission = "UPI.cuff";
    execute(){
        target = toPlayer(targetPlayerName); 
        target.arrest();
        player.message(target.name + " Has Been Cuffed!");
    }
}
 
command uncuff(targetPlayerName){
    permission = "UPI.cuff";
    execute(){
        target = toPlayer(targetPlayerName);
        target.release();
        player.message(target.name + " Has Been Uncuffed!");
    }
}

command inspect(){
    permission = "UPI.inspect";
    execute(){       
        barricade = player.look.getBarricade();
        if(barricade != null) {
        if(barricade.storage) {
            player.message("Target Storage Found | Storage Opened");
            barricade.storage.open(player);
            return;
            }
        }
    }
}

command ck(){
    permission = "checkowner";
    execute(){
        Barricade = player.look.getBarricade();
        if(Barricade != null){
            argPlayer = toPlayer(barricade.owner);
            argGroup = toPlayer(barricade.group);
            if(GroupName == true){
                if(ObjectID == true){
                    player.message("ID: "+barricade.id" "Owner: "+argPlayer.name+ "+Group: "+argGroup.name");
                }
                if(ObjectID == false){
                    player.message("Owner: "+argPlayer.name+ "+Group: "+argGroup.name);
                }
            }
            if(ObjectID == true){
                player.message("ID: "+barricade.id" Owner: "+argPlayer.name+)
            }
            else{
                player.message("Owner: " + argPlayer.name);
            }
        }
        Structure = player.look.getStructure();
        if(Structure != null){
            argPlayer = toPlayer(Structure.owner);
            argGroup = toPlayer(Structure.group);
            if(GroupName == true){
                if(ObjectID == true){
                    player.message("ID: "+Structure.id" "Owner: "+argPlayer.name+ "+Group: "+argGroup.name");
                }
                if(ObjectID == false){
                    player.message("Owner: "+argPlayer.name+ "+Group: "+argGroup.name);
                }
            }
            if(ObjectID == true){
                player.message("ID: "+Structure.id" Owner: "+argPlayer.name+)
            }
            else{
                player.message("Owner: " + argPlayer.name);
            }
        }

        Vehicle = player.look.getVehicle();
        if(Vehicle != null){
            argPlayer = toPlayer(Vehicle.owner);
            argGroup = toPlayer(Vehicle.group);
            if(GroupName == true){
                if(ObjectID == true){
                    player.message("ID: "+Vehicle.id" "Owner: "+argPlayer.name+ "+Group: "+argGroup.name");
                }
                if(ObjectID == false){
                    player.message("Owner: "+argPlayer.name+ "+Group: "+argGroup.name);
                }
            }
            if(ObjectID == true){
                player.message("ID: "+Vehicle.id" Owner: "+argPlayer.name+)
            }
            else{
                player.message("Owner: " + argPlayer.name);
            }
        }
        
    }
}

command Fine(target, amount, reason){
    permission =  "pd.fine";
    execute(){
        if(arguments.count < 3){
            player.message("Proper Usage | /Fine <Player> <Fine> <Reason>");
            return;
        }
        target = toPlayer(target);
        if(target == null){
            player.message("Player not found!", "red");
            return;
        }
        else{
            amount = amount.toNumber();
            if(target.experience < amount){
                player.message(target.name + " does not have enough money to pay this fine!", "red");
            }
            else{
                target.experience = target.experience - amount;
                target.message(player.name + " has fined you! For:" + amount + " For the reason: " + reason, "red");
                if(FinePayout == true){
                    player.experience = player.experience + amount;
                    player.message(target.name + " has been fined! You have been paid:" + amount, "green");
                }
            }
        }
    }
}